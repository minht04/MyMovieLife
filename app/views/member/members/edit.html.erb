<div class='container mt-5'>
  <div class='row'>
    <div class="col-sm-12 col-md-8 col-lg-5 px-5 px-sm-0 mx-auto">
    <h2>Profile</h2>
    <%= form_with model:@member, local:true do |f| %>
      <div class="form-group">
        <%= f.label :name %>
        <%= f.text_field :name, class: "form-control name" %>
      </div>
     <div class="form-group">
        <%= f.label :image %>
        <%= f.attachment_field :profile_image, class: "form-control-file profile_image" %>
        <%= attachment_image_tag @member, :profile_image, fallback: "no_image.jpg", id: "img_prev", style: "height: 250px; width: 250px;" %>
      </div>
      <div class="form-group">
        <%= f.label :introduction %>
        <%= f.text_area :introduction, class: "form-control introduction" %>
      </div>
      <div class="form-group">
        <%= f.submit 'Update Profile', class: 'btn btn-secondary' %>
      </div>
    <% end %>
    </div>
  </div>
</div>

<script>
  $(document).on("turbolinks:load", function(){
    function readURL(input) {
      if(input.files && input.files[0]){
        var reader = new FileReader();
        reader.onload = function (e) {
          $('#img_prev').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
    $("#member_profile_image").change(function(){
      readURL(this);
    });
  });
</script>